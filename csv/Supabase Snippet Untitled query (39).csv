schemaname,tablename,policyname,permissive,roles,cmd,qual,with_check
public,decisions,dec_sel,PERMISSIVE,{public},SELECT,"((EXISTS ( SELECT 1
   FROM players me
  WHERE ((me.game_id = decisions.game_id) AND (me.user_id = auth.uid()) AND (me.left_at IS NULL)))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = decisions.game_id) AND (t.user_id = auth.uid())))))",null
public,decisions,decisions_insert_own,PERMISSIVE,{authenticated},INSERT,null,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.id = decisions.player_id) AND (p.user_id = auth.uid()))))"
public,decisions,decisions_select_own,PERMISSIVE,{authenticated},SELECT,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.id = decisions.player_id) AND (p.user_id = auth.uid()))))",null
public,decisions,decisions_select_scoped,PERMISSIVE,"{anon,authenticated}",SELECT,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.user_id = auth.uid()) AND (p.game_id = decisions.game_id) AND ((p.id = decisions.player_id) OR (p.is_gm = true) OR (p.role = 'TRAINER'::text) OR (""left""(decisions.block_id, 6) = 'COMMS_'::text)))))",null
public,decisions,decisions_select_trainer_gm,PERMISSIVE,{authenticated},SELECT,"(EXISTS ( SELECT 1
   FROM (players me
     JOIN players owner ON ((owner.game_id = me.game_id)))
  WHERE ((owner.id = decisions.player_id) AND (me.user_id = auth.uid()) AND ((me.role = 'TRAINER'::text) OR COALESCE(me.is_gm, false)))))",null
public,decisions,decisions_trainer_read_all,PERMISSIVE,{authenticated},SELECT,"(EXISTS ( SELECT 1
   FROM trainer_memberships tm
  WHERE ((tm.game_id = decisions.game_id) AND (tm.user_id = auth.uid()))))",null
public,decisions,decisions_update_own,PERMISSIVE,{authenticated},UPDATE,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.id = decisions.player_id) AND (p.user_id = auth.uid()))))","(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.id = decisions.player_id) AND (p.user_id = auth.uid()))))"
public,events,ev_sel,PERMISSIVE,{public},SELECT,"((EXISTS ( SELECT 1
   FROM players me
  WHERE ((me.game_id = events.game_id) AND (me.user_id = auth.uid()) AND (me.left_at IS NULL)))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = events.game_id) AND (t.user_id = auth.uid())))))",null
public,events,events_insert_gm_only,PERMISSIVE,{public},INSERT,null,"(is_gm_of_game(game_id) OR (type = ANY (ARRAY['decision_impact'::text, 'day_change'::text])))"
public,events,events_select_members,PERMISSIVE,{public},SELECT,is_member_of_game(game_id),null
public,events,gm_or_trainer_can_insert_admin_events,PERMISSIVE,{public},INSERT,null,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = events.game_id) AND (p.user_id = auth.uid()) AND ((p.is_gm = true) OR (p.role = 'TRAINER'::text)))))"
public,game_admin_settings,gas_insert_gm_or_trainer,PERMISSIVE,{authenticated},INSERT,null,is_gm_or_trainer_of_game(game_id)
public,game_admin_settings,gas_sel,PERMISSIVE,{public},SELECT,"((EXISTS ( SELECT 1
   FROM games g
  WHERE ((g.id = game_admin_settings.game_id) AND (g.host_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = game_admin_settings.game_id) AND (t.user_id = auth.uid())))))",null
public,game_admin_settings,gas_select,PERMISSIVE,{authenticated},SELECT,"((EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = game_admin_settings.game_id) AND (p.user_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM games g
  WHERE ((g.id = game_admin_settings.game_id) AND (g.created_by = auth.uid())))) OR (COALESCE((auth.jwt() ->> 'role'::text), ''::text) = ANY (ARRAY['service_role'::text, 'admin'::text])))",null
public,game_admin_settings,gas_select_members,PERMISSIVE,{authenticated},SELECT,is_member_of_game(game_id),null
public,game_admin_settings,gas_upd,PERMISSIVE,{public},UPDATE,"((EXISTS ( SELECT 1
   FROM games g
  WHERE ((g.id = game_admin_settings.game_id) AND (g.host_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = game_admin_settings.game_id) AND (t.user_id = auth.uid())))))","((EXISTS ( SELECT 1
   FROM games g
  WHERE ((g.id = game_admin_settings.game_id) AND (g.host_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = game_admin_settings.game_id) AND (t.user_id = auth.uid())))))"
public,game_admin_settings,gas_update_gm_or_trainer,PERMISSIVE,{authenticated},UPDATE,is_gm_or_trainer_of_game(game_id),is_gm_or_trainer_of_game(game_id)
public,game_admin_settings,gas_upsert_owner_or_trainer,PERMISSIVE,{authenticated},ALL,"((EXISTS ( SELECT 1
   FROM games g
  WHERE ((g.id = game_admin_settings.game_id) AND (g.created_by = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = game_admin_settings.game_id) AND (p.user_id = auth.uid()) AND (p.role = 'TRAINER'::text)))) OR (COALESCE((auth.jwt() ->> 'role'::text), ''::text) = ANY (ARRAY['service_role'::text, 'admin'::text])))","((EXISTS ( SELECT 1
   FROM games g
  WHERE ((g.id = game_admin_settings.game_id) AND (g.created_by = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = game_admin_settings.game_id) AND (p.user_id = auth.uid()) AND (p.role = 'TRAINER'::text)))) OR (COALESCE((auth.jwt() ->> 'role'::text), ''::text) = ANY (ARRAY['service_role'::text, 'admin'::text])))"
public,game_credit_history,Only CFO can take credit,PERMISSIVE,{public},INSERT,null,"(EXISTS ( SELECT 1
   FROM players
  WHERE ((players.game_id = game_credit_history.game_id) AND (players.id = auth.uid()) AND (players.role = 'CFO'::text))))"
public,game_credit_history,Players can view credit history for their game,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM players
  WHERE ((players.game_id = game_credit_history.game_id) AND (players.id = auth.uid()))))",null
public,game_credit_history,mp_players_insert_credit_history,PERMISSIVE,{authenticated},INSERT,null,"(EXISTS ( SELECT 1
   FROM players p))"
public,game_injected_content,gm_or_trainer_can_insert_gic,PERMISSIVE,{public},INSERT,null,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = p.game_id) AND (p.user_id = auth.uid()) AND ((p.is_gm = true) OR (p.role = 'TRAINER'::text)))))"
public,game_injected_content,players_can_select_gic,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = p.game_id) AND (p.user_id = auth.uid()))))",null
public,game_injected_kpi,gm_or_trainer_can_insert_gik,PERMISSIVE,{public},INSERT,null,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = p.game_id) AND (p.user_id = auth.uid()) AND ((p.is_gm = true) OR (p.role = 'TRAINER'::text)))))"
public,game_injected_kpi,players_can_select_gik,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = p.game_id) AND (p.user_id = auth.uid()))))",null
public,game_injected_news,gin_ins,PERMISSIVE,{public},INSERT,null,"((EXISTS ( SELECT 1
   FROM games g
  WHERE ((g.id = game_injected_news.game_id) AND (g.host_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = game_injected_news.game_id) AND (t.user_id = auth.uid())))))"
public,game_injected_news,gin_sel,PERMISSIVE,{public},SELECT,"((EXISTS ( SELECT 1
   FROM players me
  WHERE ((me.game_id = game_injected_news.game_id) AND (me.user_id = auth.uid()) AND (me.left_at IS NULL)))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = game_injected_news.game_id) AND (t.user_id = auth.uid())))))",null
public,game_injected_news,gm_or_trainer_can_insert_injected_news,PERMISSIVE,{public},INSERT,null,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = game_injected_news.game_id) AND (p.user_id = auth.uid()) AND ((p.is_gm = true) OR (p.role = 'TRAINER'::text)))))"
public,game_injected_news,players_can_select_injected_news,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = game_injected_news.game_id) AND (p.user_id = auth.uid()))))",null
public,game_scenario_overrides,gm_or_trainer_can_update_overrides,PERMISSIVE,{public},UPDATE,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = p.game_id) AND (p.user_id = auth.uid()) AND ((p.is_gm = true) OR (p.role = 'TRAINER'::text)))))",true
public,game_scenario_overrides,gm_or_trainer_can_write_overrides,PERMISSIVE,{public},INSERT,null,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = p.game_id) AND (p.user_id = auth.uid()) AND ((p.is_gm = true) OR (p.role = 'TRAINER'::text)))))"
public,game_scenario_overrides,over_ins,PERMISSIVE,{public},INSERT,null,"((EXISTS ( SELECT 1
   FROM games g
  WHERE ((g.id = game_scenario_overrides.game_id) AND (g.host_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = game_scenario_overrides.game_id) AND (t.user_id = auth.uid())))))"
public,game_scenario_overrides,over_sel,PERMISSIVE,{public},SELECT,"((EXISTS ( SELECT 1
   FROM players me
  WHERE ((me.game_id = game_scenario_overrides.game_id) AND (me.user_id = auth.uid()) AND (me.left_at IS NULL)))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = game_scenario_overrides.game_id) AND (t.user_id = auth.uid())))))",null
public,game_scenario_overrides,players_can_read_overrides,PERMISSIVE,{public},SELECT,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = p.game_id) AND (p.user_id = auth.uid()))))",null
public,game_state_snapshots,snaps_sel,PERMISSIVE,{public},SELECT,"((EXISTS ( SELECT 1
   FROM players me
  WHERE ((me.game_id = game_state_snapshots.game_id) AND (me.user_id = auth.uid()) AND (me.left_at IS NULL)))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = game_state_snapshots.game_id) AND (t.user_id = auth.uid())))))",null
public,games,games_ins_self_host,PERMISSIVE,{public},INSERT,null,(host_id = auth.uid())
public,games,games_insert_self,PERMISSIVE,{public},INSERT,null,(created_by = auth.uid())
public,games,games_sel,PERMISSIVE,{public},SELECT,"((host_id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = games.id) AND (p.user_id = auth.uid()) AND (p.left_at IS NULL)))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = games.id) AND (t.user_id = auth.uid())))))",null
public,games,games_select_creator_member_trainer,PERMISSIVE,{public},SELECT,"((created_by = auth.uid()) OR (EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = games.id) AND (p.user_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships tm
  WHERE ((tm.game_id = games.id) AND (tm.user_id = auth.uid())))) OR (state = 'lobby'::text))",null
public,games,games_select_lobby_any,PERMISSIVE,"{anon,authenticated}",SELECT,(state = 'lobby'::text),null
public,games,games_upd_host_or_trainer,PERMISSIVE,{public},UPDATE,"((host_id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = games.id) AND (t.user_id = auth.uid())))))","((host_id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = games.id) AND (t.user_id = auth.uid())))))"
public,games,games_update_creator,PERMISSIVE,{public},UPDATE,(created_by = auth.uid()),(created_by = auth.uid())
public,games,gm_or_trainer_can_update_kpi,PERMISSIVE,{public},UPDATE,"(EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.game_id = p.id) AND (p.user_id = auth.uid()) AND ((p.is_gm = true) OR (p.role = 'TRAINER'::text)))))",true
public,messages,messages_insert_members,PERMISSIVE,{public},INSERT,null,"(((player_id IS NULL) AND (message_type = 'system'::text)) OR (is_my_player(player_id) AND player_belongs_to_game(player_id, game_id)))"
public,messages,messages_select_members,PERMISSIVE,{public},SELECT,is_member_of_game(game_id),null
public,messages,msg_sel,PERMISSIVE,{public},SELECT,"((EXISTS ( SELECT 1
   FROM players me
  WHERE ((me.game_id = messages.game_id) AND (me.user_id = auth.uid()) AND (me.left_at IS NULL)))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = messages.game_id) AND (t.user_id = auth.uid())))))",null
public,player_ready,read player_ready,PERMISSIVE,{public},SELECT,true,null
public,player_ready,update readiness,PERMISSIVE,{public},UPDATE,true,true
public,player_ready,write own game readiness,PERMISSIVE,{public},INSERT,null,true
public,players,players_can_delete_own,PERMISSIVE,{authenticated},DELETE,(user_id = auth.uid()),null
public,players,players_can_insert_own,PERMISSIVE,{authenticated},INSERT,null,(user_id = auth.uid())
public,players,players_can_update_own,PERMISSIVE,{authenticated},UPDATE,(user_id = auth.uid()),(user_id = auth.uid())
public,players,players_can_view_all,PERMISSIVE,{authenticated},SELECT,true,null
public,trainer_hints,th_delete_own,PERMISSIVE,{authenticated},DELETE,(sender_uid = auth.uid()),null
public,trainer_hints,th_insert_trainer,PERMISSIVE,{authenticated},INSERT,null,"((sender_uid = auth.uid()) AND (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = trainer_hints.game_id) AND (t.user_id = auth.uid())))))"
public,trainer_hints,th_select_member_or_trainer,PERMISSIVE,{authenticated},SELECT,"((sender_uid = auth.uid()) OR (EXISTS ( SELECT 1
   FROM players p
  WHERE ((p.id = trainer_hints.player_id) AND (p.game_id = trainer_hints.game_id) AND (p.user_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM trainer_memberships t
  WHERE ((t.game_id = trainer_hints.game_id) AND (t.user_id = auth.uid())))))",null
public,trainer_hints,th_update_own,PERMISSIVE,{authenticated},UPDATE,(sender_uid = auth.uid()),(sender_uid = auth.uid())
public,trainer_memberships,tm_delete_self,PERMISSIVE,{public},DELETE,(user_id = auth.uid()),null
public,trainer_memberships,tm_ins_self,PERMISSIVE,{public},INSERT,null,(user_id = auth.uid())
public,trainer_memberships,tm_insert_self,PERMISSIVE,{public},INSERT,null,(user_id = auth.uid())
public,trainer_memberships,tm_sel_self,PERMISSIVE,{public},SELECT,(user_id = auth.uid()),null
public,trainer_memberships,tm_select_own,PERMISSIVE,{authenticated},SELECT,(user_id = auth.uid()),null
public,trainer_memberships,tm_select_self,PERMISSIVE,{public},SELECT,(user_id = auth.uid()),null
public,trainer_memberships,tm_update_self,PERMISSIVE,{public},UPDATE,(user_id = auth.uid()),(user_id = auth.uid())